<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/moon.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<img src='examples/assets/React.svg' style='width: 50px;'>
					<h1>React</h1>
					<h2>Reconciliation</h2> 
				</section>
				<section>
					<h3>React</h3>
					<ul>
						<li>a JS library for building UI;</li>
						<li>maintained by Facebook as an open source project;</li>
						<li>has become highly popular because of its extra simplicity and flexibility.</li>
					</ul>
				</section>
				<section>
					<h3>Question</h3>
					<p>Why is React really so fast?</p>
				</section>
				<section>
					<h3>DOM</h3>
					<img src='examples/assets/dom.png' style='width: 50%;'>
				</section>
				<section data-auto-animate>
					<h3>What's the problem with DOM?</h3>
				</section>
				<section data-auto-animate>
					<h3>What's the problem with DOM?</h3>
					<p>When we do:</p>
					<pre><code data-trim data-noescape>document.getElementById('elementId').innerHTML = "New Value";</code></pre>
				</section>
				<section data-auto-animate>
					<h3>What's the problem with DOM?</h3>
					<p>When we do:</p>
					<pre><code data-trim data-noescape>document.getElementById('elementId').innerHTML = "New Value";</code></pre>
					<p>Browser does the following actions:</p>
					<ul style='font-size: 75%;'>
						<li>parses the HTML</li>
						<li>removes the child element of elementId</li>
						<li>updates the DOM with the “New Value”</li>
						<li>re-calculates the CSS for the parent and child</li>
						<li>updates the layout, i.e. each elements exact co-ordinates on the screen</li>
						<li>traverses the render tree</li>
						<li>and paints it on the browser display</li>
					</ul>
				</section>
				<section data-auto-animate>
					<h3>What's the problem with DOM?</h3>
					<p>Re-rendering the UI after the DOM updation can <span style="color: yellowgreen;">sloooooow</span> any web application.</p>
					<img src='examples/assets/turtle.png' style='width: 20%; margin: 20px 0 0 0;'>
				</section>
				<section data-auto-animate>
					<h3>What does React propose?</h3>
				</section>
				<section data-auto-animate>
					<h3>What does React propose?</h3>
					<p>The concept of the <span style="color: #859900;">virtual</span> DOM (VDOM)!</p>
					<img src='examples/assets/vdom_1.png' style='width: 80%; margin: 20px 0 0 0;'>
				</section>
				<section data-auto-animate>
					<h3>What's the benefit of having the VDOM?</h3>
					
				</section>
				<section data-auto-animate>
					<h3>What's the benefit of having the VDOM?</h3>
					<p>React can update <span style="color:#2aa198;">only the necessary parts</span> of the DOM.</p>	
					<p>This process through which React determines which parts need to be changed is called <span style="color: #dc322f;">reconciliation</span>.</p>
					<img src='examples/assets/vdom_2.png' style='width: 60%; margin: 0px 0 0 0; '>
				</section>
				<section>
					<p>Ready to learn more?</p>
				</section>
				<section data-auto-animate>
					<h3>How does React detect changes in UI?</h3>
				
				</section>
				<section data-auto-animate>
					<h3>How does React detect changes in UI?</h3>
					<p>React uses observables instead of dirty checking to detect change.</p>	
				</section>
				<section data-auto-animate>
					<h3>How does React compare 2 virtual DOMs?</h3>
				</section>
				<section data-auto-animate>
					<h3>How does React compare 2 virtual DOMs?</h3>
					<p>O(n3)???</p>
				</section>
				<section data-auto-animate>
					<h3>How does React compare 2 virtual DOMs?</h3>
					<p>O(n3)???</p>
					<p>React implements a heuristic O(n) diff algorithm.</p>	
				</section>
				<section>
					<h4>Diff algorithm strategies:</h4>
					<p>1. Tree diff</p>

				</section>
				<section>
					<p>Breadth First Search</p>
					<img src='examples/assets/gif.gif' style='width: 40%; margin: 20px 0 0 0; '>
					<img src='examples/assets/list.png' style='width: 40%; margin: 20px 0 0 0; vertical-align: top;'>
				</section>
				<section>
					<p>Sub-tree update</p>
					<img src='examples/assets/dirty.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>	
				</section>
				<section>
					<p>2. Component diff</p>
					<p>2.1. Two elements of different types will produce different trees.</p>
					<img src='examples/assets/5.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
					<img src='examples/assets/6.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
				</section>
				<section>
					<p>2.2. React compares the attributes and updates only the modified ones.</p>
					<img src='examples/assets/7.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
					<img src='examples/assets/8.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
				</section>
				<section>
					<p>3. Element diff</p>
					<img src='examples/assets/9.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
					<img src='examples/assets/10.png' style='width: 100%; margin: 20px 0 0 0; vertical-align: top;'>
				</section>
				<section>
					<p>A batch update mechanism:</p>
					<p>The real DOM is updated just once during the event loop.</p>
				</section>
				<section data-auto-animate>
					<h3>How can developers help React to be fast?</h3>
				</section>	
				<section data-auto-animate>
					<h3>How can developers help React to be fast?</h3>
					
					<pre><code data-trim data-line-numbers>
						<ul>
						  <li>Apple</li>
						  <li>Banana</li>
						</ul>
					</code></pre>
					<pre><code data-trim data-line-numbers="2">	
						<ul>
						  <li>Lemon</li>
						  <li>Apple</li>
						  <li>Banana</li>
						</ul>
					</code></pre>
				</section>
				<section>
					<p>1. The developer can hint at which child elements may be stable across different renders with a key prop.</p>
					<pre><code data-trim data-line-numbers>
						<ul>
						  <li key='1'>Apple</li>
						  <li key='2'>Banana</li>
						</ul>
					</code></pre>
					<pre><code data-trim data-line-numbers="2">	
						<ul>
						  <li key='3'>Lemon</li>
						  <li key='1'>Apple</li>
						  <li key='2'>Banana</li>
						</ul>
					</code></pre>
				</section>
				<section>
					<p>2. The developer can use special methods to control the reconciliation:</p>
					<ul>
						<li><span style="color: #859900;">componentWillReceiveProps({})</span> - to check if the current component can use the given property;</li>
						<li><span style="color: #859900;">shouldComponentUpdate({})</span> - to check if the current component will update either on state or property change.</li>
					</ul>
				</section>
				<section>
					<p>3. The developer can hide and display nodes through CSS instead of actually removing and adding DOM nodes.</p>
					<p>4. The developer can use a React.PureComponent, make data immutable and use other methods.</p>
				</section>
				<section>
					<p>Thank you for your attention</p>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
